# Scene Editor
 Qt 实现了一个场景编辑器。在 Qt 的 QGlWidget 控件中进行 OpenGL 编程，实现了三维图形与动画的显示与编辑功能。
 
 基于OpenGL API，采⽤C/C++，WebGL模式，构建⼀个完整的CG世界；即实现⼀个三维场景建模及真实感绘制的系统。
 
 ## 1. 基于OpenGL/WebGL，具有基本体素（⽴⽅体、球、圆柱、圆锥、多⾯棱 柱、多⾯棱台）的建模表达能⼒；
定义了一个 GeoObj 类，用于存储单个几何体。每个 GeoObj 类中含有顶点序列 vs，面的序列 fs，颜色（RGBA）和材质编号。添加 GeoObj 时，其中的顶点和面统一从一个池 (Pool 类) 中分配。这样不仅能方便相邻的面共用顶点，而且顶点和面的编号也便于管理，为之后导出 obj 文件作好了准备。
Pool 类中定义了 newVertex() 和 newFace() 方法。Vertex 类中包含顶点编号（用于导出 obj）、点的坐标、法向（用于光照计算），Vertex 类的方法主要是三种几何变换（平移、缩放、旋转）。Face 类中包含面的编号、组成该面的点的序列，以及每个点对应的纹理空间中的点 (tx, ty)。

 ## 2. 具有基本三维⽹格模型obj导⼊导出功能； 
 此项目的导入导出采用obj格式。
obj文件在文本当中定义了面和点，以构建三维模型。
在读取obj文件时，按行读取，若读取到v则构建一个Vertex类添加到队列中，若是读取到f则构建一个Face类添加到队列中，并且根据Face的顶点与Vertex一一对应。然后建立GeoObj类，添加其上的顶点和面，就完成了obj文件的读取
 
 ## 3. 具有基本材质、纹理的显⽰和编辑能⼒；
 纹理部分可以选择预置的9个纹理，或者自己的bmp文件路径，这里我们预置的纹理在界面初始化时一起初始化将直接把纹理id返回，如果是自己的图片，我们将调用纹理加载函数新加载一个纹理并返回其在纹理列表中的id.
 
 ## 4. 具有基本⼏何变换功能（旋转、平移、缩放等）； 
 对选定的几何体对象 (GeoObj) 中的每个顶点分别调用几何变换方法即可。也就是说，只要实现各个顶点的基本几何变换。旋转变换是用 3*3 变换矩阵的方法实现.
 
 ## 5. 基本光照明模型要求，并实现基本的光源编辑（如调整光源的位置，光强等 参数）； 
 光照模型的建立通过glLightfv函数来实现。
在光照模型的建立过程中，需要计算出每一个面的法线方向normal，具体实现方法是在每个面取三个点，然后用这三个点组成的两个向量，经过类似叉乘的运算，得到该面的法线方向。
光照的编辑主要分为光源位置的编辑以及光源强度的编辑两部分.

## 6. 能对建模后场景进⾏漫游如Zoom In/Out， Pan, Orbit, Zoom To Fit等观察功 能。 
场景漫游主要基于gluLookAt函数，此函数定义了世界坐标系和视角坐标系。
定义全局变量，world和eye以代表眼睛和物体的位置，当键盘事件发生之时，只需修改这两个参数并且刷新界面，就能够重新定位视角。

## 7. 能够提供动画播放功能（多帧数据连续绘制），能够提供屏幕截取/保存功 能。
动画效果的实现，基于连续帧的绘制，为当前界面定义一个Timer定时器，每隔10ms触发时间事件，将时间事件定义为刷新此页面，实现循环绘制。
截屏基于opengl的glReadPixels函数。GPU渲染完数据在显存，回传内存的唯一方式glReadPixels函数，能够读取内存当中的像素，也就是当前显示出来的界面.


